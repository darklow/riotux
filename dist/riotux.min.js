!function(t,n){"function"==typeof define&&define.amd?define([],n):"undefined"!=typeof module?module.exports=n:t.riotux=n()}(this,function(){"use strict";function t(){this.actions={}}var n,e,s={dispatch:function(t){var n=Array.prototype.slice.call(arguments,1),i=[e],c=i.concat(n);return Promise.resolve(s.mutations[t].apply(null,c)).then(function(){s.update()})},tags:[],subscribe:function(t,n,e){s.tags.push({component:t,states:n,handler:e})},unsubscribe:function(t){s.tags.forEach(function(n,e){n.component===t&&s.tags.splice(e,1)})},update:function(){s.tags.forEach(function(t,s,i){-1!==t.states.indexOf(n)&&"function"==typeof t.handler&&t.handler(n,e[n])})}};return t.prototype={listen:function(t){s.addListener(t)},subscribe:function(t,n,e){s.subscribe(t,n,e)},unsubscribe:function(t){s.unsubscribe(t)},Store:function(t){s=Object.assign(s,t),e=Object.assign({},s.state)},Actions:function(t){return this.actions=t,this.actions},action:function(){n=arguments[0];var t,e={dispatch:s.dispatch},i=[e];void 0!==s.state[n]?(t=i.concat(Array.prototype.slice.call(arguments,2)),this.actions[arguments[1]].apply(null,t)):(t=i.concat(Array.prototype.slice.call(arguments,1)),this.actions[arguments[0]].apply(null,t))},getter:function(t){return e[t]},immutable:function(t){return s.state[t]}},new t});